<div class="view-surveys-page">
  <div class="view-surveys-header">
    <h1>All Surveys</h1>
    <p>Browse and manage all surveys created in the system.</p>
  </div>
  @if (isLoading) {
    <div class="loading">Loading surveys...</div>
  } @else if (error) {
    <div class="error">{{ error }}</div>
  } @else {
    @if (surveys.length === 0) {
      <div class="empty">No surveys found.</div>
    } @else {
      <div class="survey-list">
        @for (survey of surveys; track survey.id) {
          <div class="survey-card">
            <div class="survey-card-header">
              <h2>{{ survey.title }}</h2>
              <span class="created-by">By {{ survey.createdBy }}</span>
            </div>
            <div class="survey-card-body">
              <p class="description">{{ survey.description }}</p>
              <div class="dates">
                <span>Start: {{ survey.startDate | date:'mediumDate' }}</span>
                <span>End: {{ survey.endDate | date:'mediumDate' }}</span>
              </div>
              <div class="questions-count">
                <span>{{ survey.questions.length }} Question{{ survey.questions.length !== 1 ? 's' : '' }}</span>
              </div>
            </div>
            <div class="survey-card-actions">
              <button class="btn-primary" (click)="goToDetails(survey.id)">View Details</button>
              <button class="btn-secondary" (click)="goToResults(survey.id)">View Results</button>
              <button class="btn-danger" (click)="deleteSurvey(survey.id)">Delete</button>
            </div>
          </div>
        }
      </div>
      <div class="pagination-bar">
        <button class="btn-secondary" (click)="prevPage()" [disabled]="currentPage === 1">Previous</button>
        <ng-container *ngFor="let page of getPageArray(); let i = index">
          <button class="btn-page" [class.active]="currentPage === (i+1)" (click)="goToPage(i+1)">{{ i+1 }}</button>
        </ng-container>
        <button class="btn-secondary" (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
      </div>
    }
  }
</div>
